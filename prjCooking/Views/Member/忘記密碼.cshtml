@model prjCooking.Models.t會員
@{
    ViewBag.Title = "忘記密碼";
}
<!-- 一小塊空白 -->
<section class="service-wrapper py-7">
    <div class="service-tag py-5 bg-white">
    </div>
</section>


<form method="post" class="form-horizontal" style="text-align:center;" onsubmit="return check();">
    <section>
        <div class="container ">
            <div class="row">
                <div class="col-md-6 offset-md-3 bg-light">
                    <div class="col-12 text-left">
                        <br />
                        <h3 class="text-info">忘記密碼</h3>
                        <hr />
                    </div>
                  
                    <div class="col-12 text-left">
                        <br />
                        <div class="col-12 text-left">
                            <p>會員帳號</p>
                        </div>
                        <div>
                            <input placeholder="請輸入信箱帳號" class="form-control" type="email" name="txtEmail" disabled="@ViewBag.dis" value="@ViewBag.mail" required><br>
                        </div>
                        @if (Model != null)
                        {
                            <input placeholder="XXX@gmail.com" class="form-control" type="hidden" name="txtEmail" value="@Model.f會員信箱"><br>
                        }

                        @if (ViewBag.mail != null)
                        {
                            <div class="col-12 text-left">
                                <p>請至信箱查看驗證碼並輸入</p>
                            </div>
                            <div>
                                <input placeholder="請輸入驗證碼" class="form-control" type="text" name="check" required /><br>
                            </div>
                            <div class="col-12 text-left">
                                <p>請輸入新密碼</p>
                            </div>
                            <div class="text-right">                                
                                <input placeholder="6個字以上，至少含有一個英文字及數字" class="form-control" type="password" name="txtPwd" id="chPwd" onblur="ch();" required><span id="message"></span><br>
                            </div>
                            <div class="col-12 text-left">
                                <p>再輸入一次新密碼</p>
                            </div>
                            <div class="text-right">
                                <input placeholder="再次輸入密碼" class="form-control" type="password" name="txtRePwd" id="chRePwd" onblur="ch1();" required><span id="message1"></span><br>
                            </div>
                         <br>
                         }

                          <p class="text-danger">@ViewBag.通知訊息</p>
                    </div>

                            <div class="col-12 text-right">
                                <input type="submit" class="btn btn-sm btn-info" value="下一步" />

                            </div>

                            <div class="col-12">
                                <br><br /><br /><br />
                            </div>
                        </div>
                <div class="col-12">
                    <br />
                </div>
            </div>

        </div>
    </section>
</form>

<script>
    var chPwd = document.getElementById("chPwd");
    var message = document.getElementById("message");
    function ch() {

        //6個字以上，至少含有一個英文字及數字
        var PwdRule = /^(?=.*[a-zA-Z])(?=.*\d).{6,}$/;
        if (chPwd.value != null) {
            if (chPwd.value.length >= 6 && chPwd.value.length <= 20) {
                if (chPwd.value.match(PwdRule) == null) {

                    message.innerHTML = "⛔ 密碼需含英文、數字";
                    document.getElementById("message").className = "timeFalse";
                    //alert("密碼格式錯誤")
                }
                else {
                    message.innerHTML = "✔ 輸入正確";
                    document.getElementById("message").className = "timeTrue";
                }
            }
            else {
                message.innerHTML = "⛔ 需輸入至少6個字，20個字以內";
                document.getElementById("message").className = "timeFalse";
            }
        }
    }


    var chRePwd = document.getElementById("chRePwd");
    var message1 = document.getElementById("message1");
    function ch1() {

        //6個字以上，至少含有一個英文字及數字
        var PwdRule = /^(?=.*[a-zA-Z])(?=.*\d).{6,}$/;
        if (chRePwd.value != null) {
            if (chRePwd.value.length >= 6 && chRePwd.value.length <= 20) {
                if (chRePwd.value.match(PwdRule) == null) {

                    message1.innerHTML = "⛔ 密碼需含英文、數字";
                    document.getElementById("message1").className = "timeFalse";
                    //alert("密碼格式錯誤")
                }
                else {
                    if (chPwd.value == chRePwd.value) {
                        message1.innerHTML = "✔ 輸入正確";
                        document.getElementById("message1").className = "timeTrue";
                    }
                    else {
                        message1.innerHTML = "⛔ 密碼不符";
                        document.getElementById("message1").className = "timeFalse";
                    }
                    
                }
            }
            else {
                message1.innerHTML = "⛔ 需輸入至少6個字，20個字以內";
                document.getElementById("message1").className = "timeFalse";
            }
        }
    }
   
</script>